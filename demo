import { useForm } from "react-hook-form";
import TextInput from "../ui/TextInput";
import * as yup from "yup";
import { yupResolver } from "@hookform/resolvers/yup";
import Select from "../ui/Select";

import CloudUploadIcon from "@mui/icons-material/CloudUpload";
import { Button, Grid, Typography, Paper, Box } from "@mui/material";

const schema = yup
  .object()
  .shape({
    name: yup.string().required().label("Name"),
    address: yup.string().required().label("Address"),
    phone: yup.string().required().label("Phone"),
    image: yup
      .mixed()
      .required("A Image is required")
  })
  .required();
function CreateCompany() {
  const {
    register,
    formState: { errors },
    handleSubmit,
  } = useForm({
    mode: "all",
    resolver: yupResolver(schema),
  });

  return (
    <Paper elevation={3} style={{ padding: 20 }}>
      <Typography variant="h5" className="my-3 text-center" gutterBottom>
        Create Company
      </Typography>

      <form className="mt-9" onSubmit={handleSubmit(onSubmit)}>
        <div className="grid grid-cols-1 md:grid-cols-2 ">
          <div className="">
            <label className="my-5 font-semibold" htmlFor="">
              Logo
            </label>
            <Box item xs={12} className="mt-2">
              <label htmlFor="file-upload">
                <input
                  id="file-upload"
                  name='image'
                  type="file"
                  style={{ display: "none" }}
                  onChange={async (event) => {
                    const file = event.target.files[0];
                    const base64 = await convertToBase64(file);
                    field.onChange(event.target.files);  // Keep the file object in the field state
                  }}
                />
                <Button
                  variant="outlined"
                  component="span"
                  startIcon={<CloudUploadIcon />}
                >
                  Upload
                </Button>
              </label>
            </Box>
          </div>

          <TextInput
            label="Name"  
            register={register}
            error={errors.name}
            placeholder="Company name"
          />
          <TextInput
            label={"Address :"}
            register={register}
            placeholder="address"
            className=""
            type={"text"}
            name="address"
            error={errors.address}
          />
          <TextInput
            label={"Phone"}
            register={register}
            type={"phone"}
            placeholder="Phone Number"
            className=""
            name="phone"
            error={errors.phone}
          />
        </div>

      <Box className="flex justify-center py-6">
        <Button variant="contained" type="submit">
          Create Company
        </Button>
      </Box>
      </form>
    </Paper>
  );
}

export default CreateCompany;
